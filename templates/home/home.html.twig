{# templates/home.html.twig #}
{% extends 'base.html.twig' %}

{% block title %}Accueil{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    {{ encore_entry_link_tags('app') }}
{% endblock %}

{% block body %}
<div class="min-h-screen flex flex-col">

    <header class="sticky top-0 z-50 bg-gray-900 text-white p-6">
        <div class="container mx-auto flex justify-between items-center">
            <div class="flex items-center gap-3">
                <div class="w-8 h-8" style="width: 70px; height: 70px;">
                    <img src="{{ asset('build/images/logo.png') }}" alt="Logo CV Maker" class="w-full h-full object-contain" />
                </div>
                <h1 class="text-2xl font-bold text-white tracking-wide ml-[-1rem]">Maker</h1>
            </div>
            <div class="flex items-center gap-4">
                {% if app.user %}
                    <span class="text-2xl font-bold text-white tracking-wide">
                        {{ app.user.firstname|capitalize }}
                    </span>
                {% endif %}
                <a href="{{ path('app_logout') }}" title="Déconnexion" class="w-8 h-8 flex items-center justify-center">
                    <img src="{{ asset('build/images/exit.png') }}" alt="Déconnexion" class="w-8 h-8 object-contain" />
                </a>
            </div>
        </div>
    </header>

    <main class="flex-1 w-full py-8 px-2 sm:px-4 lg:px-0">
        <div class="max-w-6xl mx-auto border border-gray-300 bg-white rounded-2xl p-6 lg:p-8 section-background">

            <section id="user">
                <div {{ react_component('components/pages/userPage', {
                    user: user,
                    csrfToken: csrf_token('user_form')
                }) }}></div>
            </section>

            <div class="flex flex-col lg:flex-row gap-8">
                <div class="flex flex-col gap-8 w-full lg:w-2/3">
                    <section id="experiences">
                        <div {{ react_component('components/pages/experiencePage', {
                            experiences: experiences,
                            csrfToken: csrf_token('experience_form')
                        }) }}></div>
                    </section>

                    <section id="formations">
                        <div {{ react_component('components/pages/trainingPage', {
                            trainings: trainings,
                            csrfToken: csrf_token('training_form')
                        }) }}></div>
                    </section>
                </div>

                <aside class="w-full lg:w-1/3">
                    <div {{ react_component('components/pages/blockPage', {
                        blocks: blocks,
                        csrfToken: csrf_token('block_form')
                    }) }}></div>
                </aside>
            </div>
        </div>
    </main>

    <footer class="bg-gray-100 text-center py-6 mt-12 border-t text-sm text-gray-600 section-background">
        <p>&copy; {{ "now"|date("Y") }} CVMaker. Tous droits réservés.</p>
    </footer>

</div>
{% endblock %}